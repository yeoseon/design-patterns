# Singleton  

클래스의 인스턴스가 단 1개만 필요한 경우가 있다.  
컴퓨터 자체를 구현한 클래스, 현재의 시스템 설정을 표현한 클래스 등이 그 예이다.  

new를 한번만 써서 주의해서 코딩하면 되겠지만, 실제로 보증을 하고 싶을 때 사용한다.
> 지정한 클래스의 인스턴스가 '절대로' 1개밖에 존재하지 않는다는 것을 보증하고 싶을 때  
> 인스턴스가 1개 밖에 존재하지 않는 것을 프로그램 상에서 표현하고 싶을 때

사용하는 패턴이다.

> static 메소드와 private 생성자를 이용한다.  

## 예제 1

**Singleton 클래스 만들기**  
Singleton 클래스는 인스턴스를 1개밖에 만들 수 없으며, 다음과 같이 **static**과 **private**으로 선언한다.    
```
private static Singleton singleton = new Singleton();
```
static 변수를 사용하므로서, Java에서는 [static](https://wikidocs.net/228) 변수가 선언되면 메모리를 1번만 사용하게 되므로 'new'를 통해 인스턴스를 추가 생성을 하더라도 에러는 나지 않지만, 같은 인스턴스에 접근할 수밖에 없게 된다.

private을 사용하게 되어 Singleton 클래스 외부에서 생성자의 호출을 금지하게 된다. 클래스 외부에서 'new'를 통해 생성자를 수행하면 컴파일 시 에러가 발생한다.  

Singleton 객체 내에는 'getInstance()'와 같은 유일한 인스턴스를 얻을 메소드를 꼭 필요로 한다.

## 정리

### Singleton

유일한 인스턴스를 얻기 위한 static 메소드를 가지고 있다.  
이 메소드는 언제나 동일한 인스턴스를 반환한다.  

## Hint

### 왜 사용하는가?

> 유일한 인스턴스를 실제로 제한함으로써 전제조건을 늘려서 이를 인식하고 프로그래밍 할 수 있다.

### 유일한 인스턴스는 언제 생성되는가?

getInstance를 호출했을 때, Singleton 클래스는 초기화 된다.  
이 때 static 필드 초기화가 이루어지고 유일한 인스턴스가 만들어진다.

### 관련 패턴

* Abstract Factory, Builder, Facade, Prototype 패턴  
위 패턴은 보통 인스턴스가 하나인 경우가 많다. 